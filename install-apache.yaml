- name: Install Apache
  hosts: apache
  become: True
  become_method: sudo
  tasks:
  - name: Install apache packages 
    yum:
      name: httpd
      state: present
  - name: template reverse proxy configuration
    template:
      src: reverse.conf.j2
      dest: /etc/httpd/conf.d/reverse.conf
  - name: Set httpd_can_network_connect flag on and keep it persistent across reboots
    seboolean:
      name: httpd_can_network_connect
      state: yes
      persistent: yes
  - name: ensure httpd is running
    service:
      name: httpd 
      state: started
      enabled: yes



  